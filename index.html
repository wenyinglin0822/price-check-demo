<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>店內查價系統（手機可掃碼）</title>

    <link rel="stylesheet" href="/static/style.css">

    <!-- 直接用官方 CDN 載入 QuaggaJS -->
    <script src="https://unpkg.com/quagga@0.12.1/dist/quagga.min.js"></script>
</head>
<body>
<div class="page">
    <h1>店內查價系統（手機可掃碼）</h1>

    <div class="search-panel">
        <label for="barcode-input">請輸入或掃描商品條碼：</label>
        <div class="search-row">
            <input id="barcode-input" type="text" placeholder="請輸入 EAN13 / UPC / Code128 條碼">
            <button id="btn-search">查詢</button>
            <button id="btn-scan">
                <span class="icon-camera">📷</span>
                掃描條碼
            </button>
        </div>
        <div class="support-note">
            支援：EAN-13 / EAN-8 / UPC / Code128 / QRCode（QRCode 僅顯示內容）
        </div>
    </div>

    <!-- 查價結果 -->
    <div id="result-panel" class="result-panel hidden">
        <div class="result-title">查價結果</div>
        <div class="result-main">
            <div class="result-name" id="res-name">—</div>
            <div class="result-price-row">
                <span class="result-label">條碼：</span>
                <span id="res-barcode">—</span>
            </div>
            <div class="result-price-row">
                <span class="result-label">未稅單價：</span>
                <span class="result-price" id="res-price">—</span>
                <span class="result-unit" id="res-unit"></span>
            </div>
        </div>
        <div class="result-extra" id="res-extra"></div>
    </div>

    <!-- 錯誤訊息 -->
    <div id="error-panel" class="error-panel hidden"></div>

    <!-- 掃描區（覆蓋全畫面） -->
    <div id="scanner-overlay" class="scanner-overlay hidden">
        <div class="scanner-box">
            <div class="scanner-header">
                <span>相機掃描模式（支援 EAN-13 / QRCode）</span>
                <button id="btn-close-scan" class="btn-close">關閉</button>
            </div>
            <div class="scanner-video-wrapper">
                <div id="scanner" class="scanner-video"></div>
                <div class="scanner-frame"></div>
            </div>
            <div class="scanner-tip">
                請將條碼置於綠色框線中央，系統會自動辨識。<br>
                若無法啟用相機，請改用手機開啟本站或改用手動輸入。
            </div>
        </div>
    </div>
</div>

<script src="/static/script.js"></script>
</body>
</html>
